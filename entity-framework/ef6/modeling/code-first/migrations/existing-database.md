---
title: Code First-Migrationen mit einer vorhandenen Datenbank - EF6
author: divega
ms.date: 2016-10-23
ms.assetid: f0cc4f93-67dd-4664-9753-0a9f913814db
ms.openlocfilehash: 06aabf3f57ca451f4d9cba469f6de40fd9aa8f23
ms.sourcegitcommit: dadee5905ada9ecdbae28363a682950383ce3e10
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/27/2018
ms.locfileid: "42998196"
---
# <a name="code-first-migrations-with-an-existing-database"></a><span data-ttu-id="bdffc-102">Code First-Migrationen mit einer vorhandenen Datenbank</span><span class="sxs-lookup"><span data-stu-id="bdffc-102">Code First Migrations with an existing database</span></span>
> [!NOTE]
> <span data-ttu-id="bdffc-103">**EF4.3 oder höher, nur** -APIs, die Funktionen erläutert, die auf dieser Seite usw. in Entity Framework 4.1 eingeführt wurden.</span><span class="sxs-lookup"><span data-stu-id="bdffc-103">**EF4.3 Onwards Only** - The features, APIs, etc. discussed in this page were introduced in Entity Framework 4.1.</span></span> <span data-ttu-id="bdffc-104">Wenn Sie eine frühere Version verwenden, gelten manche Informationen nicht.</span><span class="sxs-lookup"><span data-stu-id="bdffc-104">If you are using an earlier version, some or all of the information does not apply.</span></span>

<span data-ttu-id="bdffc-105">Dieser Artikel befasst sich mit Code First-Migrationen mit einer vorhandenen Datenbank, eine, die von Entity Framework erstellt wurde.</span><span class="sxs-lookup"><span data-stu-id="bdffc-105">This article covers using Code First Migrations with an existing database, one that wasn’t created by Entity Framework.</span></span>

> [!NOTE]
> <span data-ttu-id="bdffc-106">In diesem Artikel wird davon ausgegangen, dass Sie wissen, wie Code First-Migrationen in grundlegenden Szenarien verwenden.</span><span class="sxs-lookup"><span data-stu-id="bdffc-106">This article assumes you know how to use Code First Migrations in basic scenarios.</span></span> <span data-ttu-id="bdffc-107">Wenn Sie dies nicht tun, müssen Sie lesen [Code First-Migrationen](~/ef6/modeling/code-first/migrations/index.md) vor dem fortfahren.</span><span class="sxs-lookup"><span data-stu-id="bdffc-107">If you don’t, then you’ll need to read [Code First Migrations](~/ef6/modeling/code-first/migrations/index.md) before continuing.</span></span>

## <a name="screencasts"></a><span data-ttu-id="bdffc-108">Screencasts</span><span class="sxs-lookup"><span data-stu-id="bdffc-108">Screencasts</span></span>

<span data-ttu-id="bdffc-109">Wenn Sie stattdessen sehen Sie sich einen Screencast als diesen Artikel lesen würde, behandelt die beiden folgenden Videos den gleichen Inhalt wie in diesem Artikel.</span><span class="sxs-lookup"><span data-stu-id="bdffc-109">If you'd rather watch a screencast than read this article, the following two videos cover the same content as this article.</span></span>

### <a name="video-one-migrations---under-the-hood"></a><span data-ttu-id="bdffc-110">Video 1: "Migrations - im Hintergrund"</span><span class="sxs-lookup"><span data-stu-id="bdffc-110">Video One: "Migrations - Under the Hood"</span></span>

<span data-ttu-id="bdffc-111">[Dieser Screencast](http://channel9.msdn.com/blogs/ef/migrations-under-the-hood) befasst sich mit Migrationen wie nachverfolgt und Informationen über das Modell zum Erkennen von Änderungen des Datenmodells verwendet.</span><span class="sxs-lookup"><span data-stu-id="bdffc-111">[This screencast](http://channel9.msdn.com/blogs/ef/migrations-under-the-hood) covers how migrations tracks and uses information about the model to detect model changes.</span></span>

### <a name="video-two-migrations---existing-databases"></a><span data-ttu-id="bdffc-112">Video 2: "Migrations - vorhandene Datenbanken"</span><span class="sxs-lookup"><span data-stu-id="bdffc-112">Video Two: "Migrations - Existing Databases"</span></span>

<span data-ttu-id="bdffc-113">Erstellen auf den Konzepten von der früheren Video behandelt, [diesem Screencast](http://channel9.msdn.com/blogs/ef/migrations-existing-databases) wird beschrieben, wie aktivieren und Verwenden von Migrationen mit einer vorhandenen Datenbank.</span><span class="sxs-lookup"><span data-stu-id="bdffc-113">Building on the concepts from the previous video, [this screencast](http://channel9.msdn.com/blogs/ef/migrations-existing-databases) covers how to enable and use migrations with an existing database.</span></span>

## <a name="step-1-create-a-model"></a><span data-ttu-id="bdffc-114">Schritt 1: Erstellen eines Modells</span><span class="sxs-lookup"><span data-stu-id="bdffc-114">Step 1: Create a model</span></span>

<span data-ttu-id="bdffc-115">Ein Code First-Modell zu erstellen, die die vorhandene Datenbank ausgerichtet ist, wird der erste Schritt sein.</span><span class="sxs-lookup"><span data-stu-id="bdffc-115">Your first step will be to create a Code First model that targets your existing database.</span></span> <span data-ttu-id="bdffc-116">Die [Code First mit einer vorhandenen Datenbank](~/ef6/modeling/code-first/workflows/existing-database.md) Thema enthält ausführliche Anleitungen hierzu.</span><span class="sxs-lookup"><span data-stu-id="bdffc-116">The [Code First to an Existing Database](~/ef6/modeling/code-first/workflows/existing-database.md) topic provides detailed guidance on how to do this.</span></span>

>[!NOTE]
> <span data-ttu-id="bdffc-117">Es ist wichtig, befolgen Sie die restlichen Schritte in diesem Thema, bevor Änderungen an Ihrem Modell, das Änderungen am Datenbankschema erfordern würden.</span><span class="sxs-lookup"><span data-stu-id="bdffc-117">It is important to follow the rest of the steps in this topic before making any changes to your model that would require changes to the database schema.</span></span> <span data-ttu-id="bdffc-118">Die folgenden Schritte erfordern das Modell, das synchronisiert werden mit dem Datenbankschema.</span><span class="sxs-lookup"><span data-stu-id="bdffc-118">The following steps require the model to be in-sync with the database schema.</span></span>

## <a name="step-2-enable-migrations"></a><span data-ttu-id="bdffc-119">Schritt 2: Aktivieren von Migrationen</span><span class="sxs-lookup"><span data-stu-id="bdffc-119">Step 2: Enable Migrations</span></span>

<span data-ttu-id="bdffc-120">Der nächste Schritt ist, um Migrationen zu aktivieren.</span><span class="sxs-lookup"><span data-stu-id="bdffc-120">The next step is to enable migrations.</span></span> <span data-ttu-id="bdffc-121">Hierzu können Sie mit der **Enable-Migrations** im Paket-Manager-Konsole den Befehl.</span><span class="sxs-lookup"><span data-stu-id="bdffc-121">You can do this by running the **Enable-Migrations** command in Package Manager Console.</span></span>

<span data-ttu-id="bdffc-122">Dieser Befehl erstellen Sie einen Ordner, in der Projektmappe namens "Migrations", und fügen eine einzelne Klasse in dieser Konfiguration aufgerufen.</span><span class="sxs-lookup"><span data-stu-id="bdffc-122">This command will create a folder in your solution called Migrations, and put a single class inside it called Configuration.</span></span> <span data-ttu-id="bdffc-123">Die Konfigurationsklasse ist, in dem Sie Migrationen für Ihre Anwendung konfigurieren, Sie finden weitere Informationen finden sie unter den [Code First-Migrationen](~/ef6/modeling/code-first/migrations/index.md) Thema.</span><span class="sxs-lookup"><span data-stu-id="bdffc-123">The Configuration class is where you configure migrations for your application, you can find out more about it in the [Code First Migrations](~/ef6/modeling/code-first/migrations/index.md) topic.</span></span>

## <a name="step-3-add-an-initial-migration"></a><span data-ttu-id="bdffc-124">Schritt 3: Fügen Sie eine anfängliche Migration hinzu.</span><span class="sxs-lookup"><span data-stu-id="bdffc-124">Step 3: Add an initial migration</span></span>

<span data-ttu-id="bdffc-125">Nach der Migration erstellt und angewendet wurden ändert sich die lokale Datenbank, die auch möglicherweise Sie diese anwenden möchten, auf andere Datenbanken.</span><span class="sxs-lookup"><span data-stu-id="bdffc-125">Once migrations have been created and applied to the local database you may also want to apply these changes to other databases.</span></span> <span data-ttu-id="bdffc-126">Z. B. die lokale Datenbank ist möglicherweise eine Testdatenbank und Sie möchten schließlich auch die Änderungen auf eine Produktionsdatenbank anwenden und/oder andere Entwickler Testen von Datenbanken.</span><span class="sxs-lookup"><span data-stu-id="bdffc-126">For example, your local database may be a test database and you may ultimately want to also apply the changes to a production database and/or other developers test databases.</span></span> <span data-ttu-id="bdffc-127">Es gibt zwei Optionen für diesen Schritt und diejenige aus, die Sie auswählen sollten abhängig ist, unabhängig davon, ob das Schema für alle anderen Datenbanken leer ist oder derzeit dem Schema der lokalen Datenbank entsprechen.</span><span class="sxs-lookup"><span data-stu-id="bdffc-127">There are two options for this step and the one you should pick depends whether or not the schema of any other databases is empty or currently matches the schema of the local database.</span></span>

-   <span data-ttu-id="bdffc-128">**Option 1: Verwenden Sie vorhandenes Schema als Ausgangspunkt.**</span><span class="sxs-lookup"><span data-stu-id="bdffc-128">**Option One: Use existing schema as starting point.**</span></span> <span data-ttu-id="bdffc-129">Sie sollten diesen Ansatz verwenden, wenn andere Datenbanken, denen Migrationen, in der Zukunft angewendet werden wie Ihre lokale Datenbank verfügt derzeit über das gleiche Schema haben.</span><span class="sxs-lookup"><span data-stu-id="bdffc-129">You should use this approach when other databases that migrations will be applied to in the future will have the same schema as your local database currently has.</span></span> <span data-ttu-id="bdffc-130">Beispielsweise können Sie diese verwenden, wenn der lokale Testdatenbank derzeit v1 der Produktionsdatenbank entspricht, und Sie später diese Migrationen zum Aktualisieren der Produktionsdatenbank auf v2 übernehmen.</span><span class="sxs-lookup"><span data-stu-id="bdffc-130">For example, you might use this if your local test database currently matches v1 of your production database and you will later apply these migrations to update your production database to v2.</span></span>
-   <span data-ttu-id="bdffc-131">**Option 2: Verwenden Sie leere Datenbank als Ausgangspunkt.**</span><span class="sxs-lookup"><span data-stu-id="bdffc-131">**Option Two: Use empty database as starting point.**</span></span> <span data-ttu-id="bdffc-132">Sie sollten diesen Ansatz verwenden, bei anderen Datenbanken, denen Migrationen in der Zukunft auf angewendet werden soll, leer sind (oder noch nicht vorhanden sind).</span><span class="sxs-lookup"><span data-stu-id="bdffc-132">You should use this approach when other databases that migrations will be applied to in the future are empty (or do not exist yet).</span></span> <span data-ttu-id="bdffc-133">Beispielsweise können Sie dies verwenden, wenn Sie Schritte bei der Entwicklung Ihrer Anwendung eine Testdatenbank verwenden, aber ohne Verwendung von Migrationen und Sie werden später eine Produktionsdatenbank von Grund auf neu erstellen möchten.</span><span class="sxs-lookup"><span data-stu-id="bdffc-133">For example, you might use this if you started developing your application using a test database but without using migrations and you will later want to create a production database from scratch.</span></span>

### <a name="option-one-use-existing-schema-as-a-starting-point"></a><span data-ttu-id="bdffc-134">Option 1: Verwenden von vorhandenen Schema als Ausgangspunkt</span><span class="sxs-lookup"><span data-stu-id="bdffc-134">Option One: Use existing schema as a starting point</span></span>

<span data-ttu-id="bdffc-135">Code First-Migrationen verwendet eine Momentaufnahme des Modells gespeichert wird, in der letzten Migration zum Erkennen von Änderungen am Modell (finden Sie ausführliche Informationen zu diesem [Code First-Migrationen in Teamumgebungen](~/ef6/modeling/code-first/migrations/teams.md)).</span><span class="sxs-lookup"><span data-stu-id="bdffc-135">Code First Migrations uses a snapshot of the model stored in the most recent migration to detect changes to the model (you can find detailed information about this in [Code First Migrations in Team Environments](~/ef6/modeling/code-first/migrations/teams.md)).</span></span> <span data-ttu-id="bdffc-136">Da wir davon ausgehen, dass die Datenbanken bereits das Schema des aktuellen Modells verfügen sollen, generieren wir eine leere (ohne-Op)-Migration, die das aktuelle Modell als eine Momentaufnahme verfügt.</span><span class="sxs-lookup"><span data-stu-id="bdffc-136">Since we are going to assume that databases already have the schema of the current model, we will generate an empty (no-op) migration that has the current model as a snapshot.</span></span>

1.  <span data-ttu-id="bdffc-137">Führen Sie die **Add-Migration InitialCreate – IgnoreChanges** im Paket-Manager-Konsole den Befehl.</span><span class="sxs-lookup"><span data-stu-id="bdffc-137">Run the **Add-Migration InitialCreate –IgnoreChanges** command in Package Manager Console.</span></span> <span data-ttu-id="bdffc-138">Dadurch wird eine leere Migration mit dem aktuellen Modell als eine Momentaufnahme erstellt.</span><span class="sxs-lookup"><span data-stu-id="bdffc-138">This creates an empty migration with the current model as a snapshot.</span></span>
2.  <span data-ttu-id="bdffc-139">Führen Sie die **Update-Database** im Paket-Manager-Konsole den Befehl.</span><span class="sxs-lookup"><span data-stu-id="bdffc-139">Run the **Update-Database** command in Package Manager Console.</span></span> <span data-ttu-id="bdffc-140">Dies gilt die InitialCreate-Migration für die Datenbank.</span><span class="sxs-lookup"><span data-stu-id="bdffc-140">This will apply the InitialCreate migration to the database.</span></span> <span data-ttu-id="bdffc-141">Da die eigentliche Migration keine Änderungen enthält, wird es einfach hinzufügen, auf eine Zeile der \_ \_MigrationsHistory Tabelle gibt an, dass diese Migration bereits angewendet wurde.</span><span class="sxs-lookup"><span data-stu-id="bdffc-141">Since the actual migration doesn’t contain any changes, it will simply add a row to the \_\_MigrationsHistory table indicating that this migration has already been applied.</span></span>

### <a name="option-two-use-empty-database-as-a-starting-point"></a><span data-ttu-id="bdffc-142">Option 2: Verwenden von leeren Datenbank als Ausgangspunkt</span><span class="sxs-lookup"><span data-stu-id="bdffc-142">Option Two: Use empty database as a starting point</span></span>

<span data-ttu-id="bdffc-143">In diesem Fall benötigen wir Migrationen in der Lage, um die gesamte Datenbank zu erstellen, von Grund auf neu – einschließlich der Tabellen, die bereits in der lokalen Datenbank vorhanden sind.</span><span class="sxs-lookup"><span data-stu-id="bdffc-143">In this scenario we need Migrations to be able to create the entire database from scratch – including the tables that are already present in our local database.</span></span> <span data-ttu-id="bdffc-144">Wir werden eine InitialCreate-Migration zu erstellen, die enthält Logik zum vorhandene Schema zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="bdffc-144">We’re going to generate an InitialCreate migration that includes logic to create the existing schema.</span></span> <span data-ttu-id="bdffc-145">Wir stellen dann unsere vorhandenen Datenbank aussehen, als ob diese Migration bereits angewendet wurde.</span><span class="sxs-lookup"><span data-stu-id="bdffc-145">We’ll then make our existing database look like this migration has already been applied.</span></span>

1.  <span data-ttu-id="bdffc-146">Führen Sie die **Add-Migration InitialCreate** im Paket-Manager-Konsole den Befehl.</span><span class="sxs-lookup"><span data-stu-id="bdffc-146">Run the **Add-Migration InitialCreate** command in Package Manager Console.</span></span> <span data-ttu-id="bdffc-147">Dies erstellt eine Migration aus, um das vorhandene Schema zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="bdffc-147">This creates a migration to create the existing schema.</span></span>
2.  <span data-ttu-id="bdffc-148">Kommentieren Sie den gesamten Code in der nach-oben-Methode, die neu erstellte Migration.</span><span class="sxs-lookup"><span data-stu-id="bdffc-148">Comment out all code in the Up method of the newly created migration.</span></span> <span data-ttu-id="bdffc-149">Dadurch können wir "apply" die Migration der lokalen Datenbank ohne zu versuchen, alle Tabellen usw. neu erstellen, die bereits vorhanden.</span><span class="sxs-lookup"><span data-stu-id="bdffc-149">This will allow us to ‘apply’ the migration to the local database without trying to recreate all the tables etc. that already exist.</span></span>
3.  <span data-ttu-id="bdffc-150">Führen Sie die **Update-Database** im Paket-Manager-Konsole den Befehl.</span><span class="sxs-lookup"><span data-stu-id="bdffc-150">Run the **Update-Database** command in Package Manager Console.</span></span> <span data-ttu-id="bdffc-151">Dies gilt die InitialCreate-Migration für die Datenbank.</span><span class="sxs-lookup"><span data-stu-id="bdffc-151">This will apply the InitialCreate migration to the database.</span></span> <span data-ttu-id="bdffc-152">Da nicht die eigentliche Migration enthält Änderungen (da wir vorübergehend, kommentiert), es wird keine Zeile einfach hinzufügen der \_ \_MigrationsHistory Tabelle gibt an, dass diese Migration bereits angewendet wurde.</span><span class="sxs-lookup"><span data-stu-id="bdffc-152">Since the actual migration doesn’t contain any changes (because we temporarily commented them out), it will simply add a row to the \_\_MigrationsHistory table indicating that this migration has already been applied.</span></span>
4.  <span data-ttu-id="bdffc-153">Kommentar der Code in der nach-oben-Methode.</span><span class="sxs-lookup"><span data-stu-id="bdffc-153">Un-comment the code in the Up method.</span></span> <span data-ttu-id="bdffc-154">Dies bedeutet, dass bei dieser Migration auf künftigen Datenbanken angewendet wird, wird das Schema, das in der lokalen Datenbank bereits vorhanden war durch Migrationen erstellt werden.</span><span class="sxs-lookup"><span data-stu-id="bdffc-154">This means that when this migration is applied to future databases, the schema that already existed in the local database will be created by migrations.</span></span>

## <a name="things-to-be-aware-of"></a><span data-ttu-id="bdffc-155">Dinge zu beachten</span><span class="sxs-lookup"><span data-stu-id="bdffc-155">Things to be aware of</span></span>

<span data-ttu-id="bdffc-156">Es gibt einige Dinge, denen Sie bei Verwendung von Migrationen anhand einer vorhandenen Datenbank berücksichtigen müssen.</span><span class="sxs-lookup"><span data-stu-id="bdffc-156">There are a few things you need to be aware of when using Migrations against an existing database.</span></span>

### <a name="defaultcalculated-names-may-not-match-existing-schema"></a><span data-ttu-id="bdffc-157">Standard/berechnet Namen möglicherweise nicht mit dem vorhandenen Schema übereinstimmen.</span><span class="sxs-lookup"><span data-stu-id="bdffc-157">Default/calculated names may not match existing schema</span></span>

<span data-ttu-id="bdffc-158">Migrationen gibt explizit an Namen für die Spalten und Tabellen bei der es erstellt das Gerüst für eine Migration.</span><span class="sxs-lookup"><span data-stu-id="bdffc-158">Migrations explicitly specifies names for columns and tables when it scaffolds a migrations.</span></span> <span data-ttu-id="bdffc-159">Es gibt jedoch auch andere Datenbankobjekte, die Migrationen berechnet einen Standardnamen für beim Anwenden von Migrationen.</span><span class="sxs-lookup"><span data-stu-id="bdffc-159">However, there are other database objects that Migrations calculates a default name for when applying the migrations.</span></span> <span data-ttu-id="bdffc-160">Dies schließt Indizes und foreign Key-Einschränkungen.</span><span class="sxs-lookup"><span data-stu-id="bdffc-160">This includes indexes and foreign key constraints.</span></span> <span data-ttu-id="bdffc-161">Wenn Sie ein vorhandenes Schema zu verwenden, müssen diese berechneten Namen entsprechen möglicherweise nicht was tatsächlich in der Datenbank vorhanden ist.</span><span class="sxs-lookup"><span data-stu-id="bdffc-161">When targeting an existing schema, these calculated names may not match what actually exists in your database.</span></span>

<span data-ttu-id="bdffc-162">Hier sind einige Beispiele für, wenn Sie dies berücksichtigen müssen:</span><span class="sxs-lookup"><span data-stu-id="bdffc-162">Here are some examples of when you need to be aware of this:</span></span>

<span data-ttu-id="bdffc-163">**Wenn Sie verwendet "eine Option: vorhandenes Schema als Ausgangspunkt verwenden" aus Schritt 3:**</span><span class="sxs-lookup"><span data-stu-id="bdffc-163">**If you used ‘Option One: Use existing schema as a starting point’ from Step 3:**</span></span>

-   <span data-ttu-id="bdffc-164">Wenn zukünftige Änderungen in Ihrem Modell erforderlich ist, ändern oder löschen keines der Datenbankobjekte, die unterschiedlich benannt ist, müssen Sie so ändern Sie die erstellte Migration durch, um den richtigen Namen zu geben.</span><span class="sxs-lookup"><span data-stu-id="bdffc-164">If future changes in your model require changing or dropping one of the database objects that is named differently, you will need to modify the scaffolded migration to specify the correct name.</span></span> <span data-ttu-id="bdffc-165">Die Migrations-APIs haben, einen optionalen Namensparameter, der Ihnen dies ermöglicht wird.</span><span class="sxs-lookup"><span data-stu-id="bdffc-165">The Migrations APIs have an optional Name parameter that allows you to do this.</span></span>
    <span data-ttu-id="bdffc-166">Zum Beispiel möglicherweise das vorhandene Schema eine Post-Tabelle mit einer BlogId Fremdschlüsselspalte, die einen Index mit dem Namen IndexFk\_BlogId.</span><span class="sxs-lookup"><span data-stu-id="bdffc-166">For example, your existing schema may have a Post table with a BlogId foreign key column that has an index named IndexFk\_BlogId.</span></span> <span data-ttu-id="bdffc-167">Jedoch standardmäßig Migrationen würde erwarten, dass dieser Index den Namen IX\_BlogId.</span><span class="sxs-lookup"><span data-stu-id="bdffc-167">However, by default Migrations would expect this index to be named IX\_BlogId.</span></span> <span data-ttu-id="bdffc-168">Wenn Sie eine Änderung an Ihrem Modell, die sich ergibt, die diesen Index löschen vornehmen, müssen Sie so ändern Sie den eingerüsteten DropIndex-Aufruf an die IndexFk\_BlogId-Namen.</span><span class="sxs-lookup"><span data-stu-id="bdffc-168">If you make a change to your model that results in dropping this index, you will need to modify the scaffolded DropIndex call to specify the IndexFk\_BlogId name.</span></span>

<span data-ttu-id="bdffc-169">**Wenn Sie verwendet ' Option zwei: leere Datenbank als Ausgangspunkt verwenden "aus Schritt 3:**</span><span class="sxs-lookup"><span data-stu-id="bdffc-169">**If you used ‘Option Two: Use empty database as a starting point’ from Step 3:**</span></span>

-   <span data-ttu-id="bdffc-170">Die Down-Methode der anfänglichen Migration (die in eine leere Datenbank wiederhergestellt wird) für die lokale Datenbank ausführen möchten möglicherweise fehl, da Migrationen versucht werden, Indizes und foreign Key-Einschränkungen, die unter Verwendung der falschen Namen zu löschen.</span><span class="sxs-lookup"><span data-stu-id="bdffc-170">Trying to run the Down method of the initial migration (that is, reverting to an empty database) against your local database may fail because Migrations will try to drop indexes and foreign key constraints using the incorrect names.</span></span> <span data-ttu-id="bdffc-171">Dies betrifft nur die lokale Datenbank, da andere Datenbanken von Grund auf neu mithilfe der nach-oben-Methode, der die ursprüngliche Migration erstellt werden.</span><span class="sxs-lookup"><span data-stu-id="bdffc-171">This will only affect your local database since other databases will be created from scratch using the Up method of the initial migration.</span></span>
    <span data-ttu-id="bdffc-172">Wenn Sie Ihre vorhandene lokale Datenbank auf einen leeren Zustand herabstufen möchten, ist es am einfachsten, manuell, entweder durch das Löschen der Datenbank, oder löschen alle Tabellen erfolgen.</span><span class="sxs-lookup"><span data-stu-id="bdffc-172">If you want to downgrade your existing local database to an empty state it is easiest to do this manually, either by dropping the database or dropping all the tables.</span></span> <span data-ttu-id="bdffc-173">Nach dieser anfänglichen herabgestuft wird, die alle Datenbankobjekte neu ist, werden mit den Standardnamen erstellt werden, werden also dieses Problem nicht selbst erneut angezeigt.</span><span class="sxs-lookup"><span data-stu-id="bdffc-173">After this initial downgrade all database objects will be recreated with the default names, so this issue will not present itself again.</span></span>
-   <span data-ttu-id="bdffc-174">Wenn zukünftige Änderungen in Ihrem Modell erforderlich ist, ändern oder löschen keines der Datenbankobjekte, die unterschiedlich benannt ist, funktioniert dies für Ihre vorhandene lokale Datenbank – nicht, da die Standardeinstellungen wird nicht mit den Namen übereinstimmen.</span><span class="sxs-lookup"><span data-stu-id="bdffc-174">If future changes in your model require changing or dropping one of the database objects that is named differently, this will not work against your existing local database – since the names won’t match the defaults.</span></span> <span data-ttu-id="bdffc-175">Allerdings funktioniert es für Datenbanken, die "von Grund auf neu erstellen" erstellt wurden, da sie verwendet haben, die Standardnamen von Migrationen ausgewählt werden.</span><span class="sxs-lookup"><span data-stu-id="bdffc-175">However, it will work against databases that were created ‘from scratch’ since they will have used the default names chosen by Migrations.</span></span>
    <span data-ttu-id="bdffc-176">Sie können diese Änderungen manuell vornehmen, für die vorhandene lokale Datenbank, oder erwägen Sie, dass Migrationen, erneuten Erstellen der Datenbank von Grund auf neu – wie auf anderen Computern wird.</span><span class="sxs-lookup"><span data-stu-id="bdffc-176">You could either make these changes manually on your local existing database, or consider having Migrations recreate your database from scratch – as it will on other machines.</span></span>
-   <span data-ttu-id="bdffc-177">Datenbanken erstellt wurden, mit der nach-oben-Methode, der Ihrem ersten Migrationsschritt möglicherweise unterscheiden sich etwas aus der lokalen Datenbank seit der berechneten Standardnamen für Indizes und foreign Key-Einschränkungen verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="bdffc-177">Databases created using the Up method of your initial migration may differ slightly from the local database since the calculated default names for indexes and foreign key constraints will be used.</span></span> <span data-ttu-id="bdffc-178">Sie können auch mit zusätzlichen Indizes enden wie Migrationen Indizes für Fremdschlüsselspalten in der Standardeinstellung erstellt werden – dies möglicherweise nicht der Fall, in der ursprünglichen lokalen Datenbank waren.</span><span class="sxs-lookup"><span data-stu-id="bdffc-178">You may also end up with extra indexes as Migrations will create indexes on foreign key columns by default – this may not have been the case in your original local database.</span></span>

### <a name="not-all-database-objects-are-represented-in-the-model"></a><span data-ttu-id="bdffc-179">Nicht alle Datenbankobjekte werden im Modell dargestellt.</span><span class="sxs-lookup"><span data-stu-id="bdffc-179">Not all database objects are represented in the model</span></span>

<span data-ttu-id="bdffc-180">Datenbankobjekte, die nicht Teil des Modells sind, werden nicht durch Migrationen verarbeitet werden.</span><span class="sxs-lookup"><span data-stu-id="bdffc-180">Database objects that are not part of your model will not be handled by Migrations.</span></span> <span data-ttu-id="bdffc-181">Dies kann beinhalten, Sichten, gespeicherte Prozeduren, Berechtigungen, Tabellen, die nicht Teil des Modells, zusätzlichen Indizes usw. sind.</span><span class="sxs-lookup"><span data-stu-id="bdffc-181">This can include views, stored procedures, permissions, tables that are not part of your model, additional indexes, etc.</span></span>

<span data-ttu-id="bdffc-182">Hier sind einige Beispiele für, wenn Sie dies berücksichtigen müssen:</span><span class="sxs-lookup"><span data-stu-id="bdffc-182">Here are some examples of when you need to be aware of this:</span></span>

-   <span data-ttu-id="bdffc-183">Unabhängig von der Option ausgewählt wird in "Schritt 3", wenn zukünftige Änderungen in Ihrem Modell erforderlich ist, ändern oder löschen diese zusätzlichen Objekte, die Migrationen nicht weiß, um diese Änderungen vorzunehmen.</span><span class="sxs-lookup"><span data-stu-id="bdffc-183">Regardless of the option you chose in ‘Step 3’, if future changes in your model require changing or dropping these additional objects Migrations will not know to make these changes.</span></span> <span data-ttu-id="bdffc-184">Z. B. Wenn Sie eine Spalte, die einen zusätzlichen Index verfügt löschen, erkennen Migrationen nicht kann der Index gelöscht werden.</span><span class="sxs-lookup"><span data-stu-id="bdffc-184">For example, if you drop a column that has an additional index on it, Migrations will not know to drop the index.</span></span> <span data-ttu-id="bdffc-185">Sie müssen manuell auf den erstellten Migration hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="bdffc-185">You will need to manually add this to the scaffolded Migration.</span></span>
-   <span data-ttu-id="bdffc-186">Wenn Sie verwendet ' Option zwei: leere Datenbank als Ausgangspunkt verwenden ", diese zusätzlichen Objekte nicht von der Methode nach Ihrem ersten Migrationsschritt erstellt.</span><span class="sxs-lookup"><span data-stu-id="bdffc-186">If you used ‘Option Two: Use empty database as a starting point’, these additional objects will not be created by the Up method of your initial migration.</span></span>
    <span data-ttu-id="bdffc-187">Sie können ändern, die nach-oben und unten Methoden, um diese zusätzlichen Objekte Wenn erledigt werden soll.</span><span class="sxs-lookup"><span data-stu-id="bdffc-187">You can modify the Up and Down methods to take care of these additional objects if you wish.</span></span> <span data-ttu-id="bdffc-188">Für Objekte, die nicht nativ in der Migrations-API – z. B. Sichten unterstützt werden – können Sie die [Sql](https://msdn.microsoft.com/library/system.data.entity.migrations.dbmigration.sql.aspx) Methode für die Ausführung von unformatierten SQL zum Erstellen/diese löschen.</span><span class="sxs-lookup"><span data-stu-id="bdffc-188">For objects that are not natively supported in the Migrations API – such as views – you can use the [Sql](https://msdn.microsoft.com/library/system.data.entity.migrations.dbmigration.sql.aspx) method to run raw SQL to create/drop them.</span></span>
