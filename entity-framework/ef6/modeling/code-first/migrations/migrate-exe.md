---
title: Verwenden von migrate.exe - EF6
author: divega
ms.date: 2016-10-23
ms.assetid: 989ea862-e936-4c85-926a-8cfbef5df5b8
ms.openlocfilehash: 39740578e4a8c2d5400bcabbcb107baf0648fba5
ms.sourcegitcommit: dadee5905ada9ecdbae28363a682950383ce3e10
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/27/2018
ms.locfileid: "42993498"
---
# <a name="using-migrateexe"></a><span data-ttu-id="f8481-102">Verwenden von migrate.exe</span><span class="sxs-lookup"><span data-stu-id="f8481-102">Using migrate.exe</span></span>
<span data-ttu-id="f8481-103">Code First-Migrationen können verwendet werden, um die Aktualisierung einer Datenbank in visual Studio, aber Sie können auch über die Befehlszeile Tool migrate.exe ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="f8481-103">Code First Migrations can be used to update a database from inside visual studio, but can also be executed via the command line tool migrate.exe.</span></span> <span data-ttu-id="f8481-104">Auf dieser Seite erhalten einen Überblick zum migrate.exe zu verwenden, um Migrationen für eine Datenbank auszuführen.</span><span class="sxs-lookup"><span data-stu-id="f8481-104">This page will give a quick overview on how to use migrate.exe to execute migrations against a database.</span></span>

> [!NOTE]
> <span data-ttu-id="f8481-105">In diesem Artikel wird davon ausgegangen, dass Sie wissen, wie Code First-Migrationen in grundlegenden Szenarien verwenden.</span><span class="sxs-lookup"><span data-stu-id="f8481-105">This article assumes you know how to use Code First Migrations in basic scenarios.</span></span> <span data-ttu-id="f8481-106">Wenn Sie dies nicht tun, müssen Sie lesen [Code First-Migrationen](~/ef6/modeling/code-first/migrations/index.md) vor dem fortfahren.</span><span class="sxs-lookup"><span data-stu-id="f8481-106">If you don’t, then you’ll need to read [Code First Migrations](~/ef6/modeling/code-first/migrations/index.md) before continuing.</span></span>

## <a name="copy-migrateexe"></a><span data-ttu-id="f8481-107">Kopieren Sie migrate.exe</span><span class="sxs-lookup"><span data-stu-id="f8481-107">Copy migrate.exe</span></span>

<span data-ttu-id="f8481-108">Bei der Installation von Entity Framework werden mithilfe von NuGet migrate.exe im Ordner "Tools" des heruntergeladenen Pakets.</span><span class="sxs-lookup"><span data-stu-id="f8481-108">When you install Entity Framework using NuGet migrate.exe will be inside the tools folder of the downloaded package.</span></span> <span data-ttu-id="f8481-109">In &lt;Projektordner&gt;\\Pakete\\EntityFramework.&lt; Version&gt;\\Tools</span><span class="sxs-lookup"><span data-stu-id="f8481-109">In &lt;project folder&gt;\\packages\\EntityFramework.&lt;version&gt;\\tools</span></span>

<span data-ttu-id="f8481-110">Nachdem Sie migrate.exe haben müssen Sie zum Kopieren auf den Speicherort der Assembly, die Ihre Migrationen enthält.</span><span class="sxs-lookup"><span data-stu-id="f8481-110">Once you have migrate.exe then you need to copy it to the location of the assembly that contains your migrations.</span></span>

<span data-ttu-id="f8481-111">Wenn Ihre Anwendung auf .NET 4 ausgerichtet ist und nicht 4.5 Sie zum Kopieren müssen der **Redirect.config** an Ort und benennen Sie sie **migrate.exe.config**. Dies ist, damit migrate.exe Ruft ab, die richtigen bindungsumleitungen, um die Entity Framework-Assembly suchen zu können.</span><span class="sxs-lookup"><span data-stu-id="f8481-111">If your application targets .NET 4, and not 4.5, then you will need to copy the **Redirect.config** into the location as well and rename it **migrate.exe.config**. This is so that migrate.exe gets the correct binding redirects to be able to locate the Entity Framework assembly.</span></span>

| <span data-ttu-id="f8481-112">.NET 4.5</span><span class="sxs-lookup"><span data-stu-id="f8481-112">.NET 4.5</span></span>                                   | <span data-ttu-id="f8481-113">.NET 4.0</span><span class="sxs-lookup"><span data-stu-id="f8481-113">.NET 4.0</span></span>                                   |
|:-------------------------------------------|:-------------------------------------------|
| ![Net45Files](~/ef6/media/net45files.png)  | ![Net40Files](~/ef6/media/net40files.png)  |

> [!NOTE]
> <span data-ttu-id="f8481-116">Migrate.exe X64 unterstützt keine Assemblys.</span><span class="sxs-lookup"><span data-stu-id="f8481-116">migrate.exe doesn't support x64 assemblies.</span></span>

## <a name="using-migrateexe"></a><span data-ttu-id="f8481-117">Verwenden von Migrate.exe</span><span class="sxs-lookup"><span data-stu-id="f8481-117">Using Migrate.exe</span></span>

<span data-ttu-id="f8481-118">Sobald Sie migrate.exe in den richtigen Ordner verschoben haben, und Sie können Sie sie verwenden Migrationen, für die Datenbank ausgeführt werden soll.</span><span class="sxs-lookup"><span data-stu-id="f8481-118">Once you have moved migrate.exe to the correct folder then you should be able to use it to execute migrations against the database.</span></span> <span data-ttu-id="f8481-119">Das Hilfsprogramm dient Sie lediglich Migrationen auszuführen.</span><span class="sxs-lookup"><span data-stu-id="f8481-119">All the utility is designed to do is execute migrations.</span></span> <span data-ttu-id="f8481-120">Es kann nicht Migrationen zu generieren, oder erstellen Sie ein SQL­Skript.</span><span class="sxs-lookup"><span data-stu-id="f8481-120">It cannot generate migrations or create a SQL script.</span></span>

### <a name="see-options"></a><span data-ttu-id="f8481-121">Finden Sie unter Optionen</span><span class="sxs-lookup"><span data-stu-id="f8481-121">See options</span></span>

``` console
Migrate.exe /?
```

<span data-ttu-id="f8481-122">Oben zeigt die Hilfeseite verknüpft ist, mit diesem Hilfsprogramm, beachten Sie, die Sie benötigen, um EntityFramework.dll am gleichen Speicherort zu erhalten, die Sie migrate.exe, damit dies ausgeführt werden funktioniert.</span><span class="sxs-lookup"><span data-stu-id="f8481-122">The above will display the help page associated with this utility, note that you will need to have the EntityFramework.dll in the same location that you are running migrate.exe in order for this to work.</span></span>

### <a name="migrate-to-the-latest-migration"></a><span data-ttu-id="f8481-123">Migrieren Sie zur aktuellen</span><span class="sxs-lookup"><span data-stu-id="f8481-123">Migrate to the latest migration</span></span>

``` console
Migrate.exe MyMvcApplication.dll /startupConfigurationFile=”..\\web.config”
```

<span data-ttu-id="f8481-124">Wenn ausführen migrate.exe des einzige obligatorischen Parameters wird die Assembly, die die Assembly mit den Migrationen, die Sie ausführen möchten ist, aber alle Konvention wird verwendet, die Einstellungen basieren, wenn Sie keine Konfigurationsdatei angeben.</span><span class="sxs-lookup"><span data-stu-id="f8481-124">When running migrate.exe the only mandatory parameter is the assembly, which is the assembly that contains the migrations that you are trying to run, but it will use all convention based settings if you do not specify the configuration file.</span></span>

### <a name="migrate-to-a-specific-migration"></a><span data-ttu-id="f8481-125">Migrieren Sie zu einem GUID-migration</span><span class="sxs-lookup"><span data-stu-id="f8481-125">Migrate to a specific migration</span></span>

``` console
Migrate.exe MyApp.exe /startupConfigurationFile=”MyApp.exe.config” /targetMigration=”AddTitle”
```

<span data-ttu-id="f8481-126">Wenn Sie Migrationen bis zu einer bestimmten Migration ausführen möchten, können Sie den Namen der Migration angeben.</span><span class="sxs-lookup"><span data-stu-id="f8481-126">If you want to run migrations up to a specific migration, then you can specify the name of the migration.</span></span> <span data-ttu-id="f8481-127">Dies führt bei allen vorherige Migrationen nach Bedarf bis zum Abrufen der Migration angegeben.</span><span class="sxs-lookup"><span data-stu-id="f8481-127">This will run all previous migrations as required until getting to the migration specified.</span></span>

### <a name="specify-working-directory"></a><span data-ttu-id="f8481-128">Arbeitsverzeichnis angeben</span><span class="sxs-lookup"><span data-stu-id="f8481-128">Specify working directory</span></span>

``` console
Migrate.exe MyApp.exe /startupConfigurationFile=”MyApp.exe.config” /startupDirectory=”c:\\MyApp”
```

<span data-ttu-id="f8481-129">Wenn Sie Assembly verfügt über Abhängigkeiten oder Dateien relativ zum Arbeitsverzeichnis liest, müssen Sie StartupDirectory festgelegt.</span><span class="sxs-lookup"><span data-stu-id="f8481-129">If you assembly has dependencies or reads files relative to the working directory then you will need to set startupDirectory.</span></span>

### <a name="specify-migration-configuration-to-use"></a><span data-ttu-id="f8481-130">Geben Sie die zu verwendende migrationskonfiguration</span><span class="sxs-lookup"><span data-stu-id="f8481-130">Specify migration configuration to use</span></span>

``` console
Migrate.exe MyAssembly CustomConfig /startupConfigurationFile=”..\\web.config”
```

<span data-ttu-id="f8481-131">Wenn Sie über mehrere Konfigurationsklassen für die Migration verfügen, müssen Klassen erben von "dbmigrationconfiguration", klicken Sie dann angeben, die für diese Ausführung verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="f8481-131">If you have multiple migration configuration classes, classes inheriting from DbMigrationConfiguration, then you need to specify which is to be used for this execution.</span></span> <span data-ttu-id="f8481-132">Dies wird durch Bereitstellen des optionalen zweiten Parameters ohne einen Switch als oben angegeben.</span><span class="sxs-lookup"><span data-stu-id="f8481-132">This is specified by providing the optional second parameter without a switch as above.</span></span>

### <a name="provide-connection-string"></a><span data-ttu-id="f8481-133">Geben Sie die Verbindungszeichenfolge</span><span class="sxs-lookup"><span data-stu-id="f8481-133">Provide connection string</span></span>

``` console
Migrate.exe BlogDemo.dll /connectionString=”Data Source=localhost;Initial Catalog=BlogDemo;Integrated Security=SSPI” /connectionProviderName=”System.Data.SqlClient”
```

<span data-ttu-id="f8481-134">Wenn Sie eine Verbindungszeichenfolge in der Befehlszeile angeben möchten müssen Sie auch den Anbieternamen bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="f8481-134">If you wish to specify a connection string at the command line then you must also provide the provider name.</span></span> <span data-ttu-id="f8481-135">Der Name des Anbieters nicht angeben, wird eine Ausnahme ausgelöst.</span><span class="sxs-lookup"><span data-stu-id="f8481-135">Not specifying the provider name will cause an exception.</span></span>

## <a name="common-problems"></a><span data-ttu-id="f8481-136">Häufige Probleme</span><span class="sxs-lookup"><span data-stu-id="f8481-136">Common Problems</span></span>

| <span data-ttu-id="f8481-137">Fehlermeldung</span><span class="sxs-lookup"><span data-stu-id="f8481-137">Error Message</span></span>                                                                                                                                                                                                                                                                                                                      | <span data-ttu-id="f8481-138">Lösung</span><span class="sxs-lookup"><span data-stu-id="f8481-138">Solution</span></span>                                                                                                                                                                                                                                                                                             |
|:-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="f8481-139">Nicht behandelte Ausnahme: System.IO.FileLoadException: konnte nicht geladen werden, Datei oder Assembly "EntityFramework", "Version = 5.0.0.0, Culture = Neutral, PublicKeyToken = b77a5c561934e089' oder eine ihrer Abhängigkeiten.</span><span class="sxs-lookup"><span data-stu-id="f8481-139">Unhandled Exception: System.IO.FileLoadException:  Could not load file or assembly 'EntityFramework, Version=5.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' or one of its dependencies.</span></span> <span data-ttu-id="f8481-140">Das manifest der sich Assemblydefinition entspricht nicht den der Assemblyverweis verweist.</span><span class="sxs-lookup"><span data-stu-id="f8481-140">The located assembly's manifest definition does not match the assembly reference.</span></span> <span data-ttu-id="f8481-141">(Ausnahme von HRESULT: 0x80131040)</span><span class="sxs-lookup"><span data-stu-id="f8481-141">(Exception from HRESULT: 0x80131040)</span></span>         | <span data-ttu-id="f8481-142">Dies bedeutet normalerweise, dass Sie eine .NET 4-Anwendung ohne die Datei Redirect.config ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="f8481-142">This typically means that you are running a .NET 4 application without the Redirect.config file.</span></span> <span data-ttu-id="f8481-143">Sie müssen die Redirect.config in am gleichen Speicherort wie migrate.exe kopieren aus, und benennen Sie sie in migrate.exe.config.</span><span class="sxs-lookup"><span data-stu-id="f8481-143">You need to copy the Redirect.config to the same location as migrate.exe and rename it to migrate.exe.config.</span></span>                                                                                       |
| <span data-ttu-id="f8481-144">Nicht behandelte Ausnahme: System.IO.FileLoadException: konnte nicht geladen werden, Datei oder Assembly "EntityFramework, Version = 4.4.0.0, Kultur = Neutral, PublicKeyToken = b77a5c561934e089" oder eine ihrer Abhängigkeiten.</span><span class="sxs-lookup"><span data-stu-id="f8481-144">Unhandled Exception: System.IO.FileLoadException: Could not load file or assembly 'EntityFramework, Version=4.4.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' or one of its dependencies.</span></span> <span data-ttu-id="f8481-145">Das manifest der sich Assemblydefinition entspricht nicht den der Assemblyverweis verweist.</span><span class="sxs-lookup"><span data-stu-id="f8481-145">The located assembly's manifest definition does not match the assembly reference.</span></span> <span data-ttu-id="f8481-146">(Ausnahme von HRESULT: 0x80131040)</span><span class="sxs-lookup"><span data-stu-id="f8481-146">(Exception from HRESULT: 0x80131040)</span></span>          | <span data-ttu-id="f8481-147">Diese Ausnahme bedeutet, dass Sie .NET 4.5 ausgeführt werden, die Anwendung mit der Redirect.config an den migrate.exe-Speicherort kopiert.</span><span class="sxs-lookup"><span data-stu-id="f8481-147">This exception means that you are running a .NET 4.5 application with the Redirect.config copied to the migrate.exe location.</span></span> <span data-ttu-id="f8481-148">Wenn Ihre app auf .NET 4.5 ist, müssen Sie keine haben die Config-Datei mit die umleitungen in.</span><span class="sxs-lookup"><span data-stu-id="f8481-148">If your app is .NET 4.5 then you do not need to have the config file with the redirects inside.</span></span> <span data-ttu-id="f8481-149">Löschen Sie die migrate.exe.config-Datei.</span><span class="sxs-lookup"><span data-stu-id="f8481-149">Delete the migrate.exe.config file.</span></span>                                    |
| <span data-ttu-id="f8481-150">Fehler: Kann nicht zum Aktualisieren der Datenbank, um das aktuelle Modell übereinstimmen, da es ausstehende Änderungen gibt und die automatische Migration deaktiviert ist.</span><span class="sxs-lookup"><span data-stu-id="f8481-150">ERROR: Unable to update database to match the current model because there are pending changes and automatic migration is disabled.</span></span> <span data-ttu-id="f8481-151">Schreiben Sie die ausstehenden modelländerungen für eine Migration codebasierte oder aktivieren Sie die automatische Migration.</span><span class="sxs-lookup"><span data-stu-id="f8481-151">Either write the pending model changes to a code-based migration or enable automatic migration.</span></span> <span data-ttu-id="f8481-152">Legen Sie DbMigrationsConfiguration.AutomaticMigrationsEnabled auf True, um die automatische Migration aktivieren.</span><span class="sxs-lookup"><span data-stu-id="f8481-152">Set DbMigrationsConfiguration.AutomaticMigrationsEnabled to true to enable automatic migration.</span></span> | <span data-ttu-id="f8481-153">Dieser Fehler tritt bei der Migration wird ausgeführt, wenn Sie noch nicht erstellt haben, eine Migration zum bewältigen der Änderungen am Modell vorgenommen, und die Datenbank nicht das Modell entspricht.</span><span class="sxs-lookup"><span data-stu-id="f8481-153">This error occurs if running migrate when you haven’t created a migration to cope with changes made to the model, and the database does not match the model.</span></span> <span data-ttu-id="f8481-154">Hinzufügen einer Eigenschaft auf eine Modellklasse, die dann migrate.exe ausführen, ohne eine Migration aus, um die Datenbank zu aktualisieren, ist ein Beispiel hierfür.</span><span class="sxs-lookup"><span data-stu-id="f8481-154">Adding a property to a model class then running migrate.exe without creating a migration to upgrade the database is an example of this.</span></span> |
| <span data-ttu-id="f8481-155">Fehler: Typ wird für Member nicht aufgelöst "System.Data.Entity.Migrations.Design.ToolingFacade+UpdateRunner,EntityFramework, Version = 5.0.0.0, Culture = Neutral, PublicKeyToken = b77a5c561934e089'.</span><span class="sxs-lookup"><span data-stu-id="f8481-155">ERROR: Type is not resolved for member 'System.Data.Entity.Migrations.Design.ToolingFacade+UpdateRunner,EntityFramework, Version=5.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089'.</span></span>                                                                                                                                       | <span data-ttu-id="f8481-156">Dieser Fehler kann durch Angabe einer falschen Startverzeichnis verursacht werden.</span><span class="sxs-lookup"><span data-stu-id="f8481-156">This error can be caused by specifying an incorrect startup directory.</span></span> <span data-ttu-id="f8481-157">Dies muss der Speicherort der migrate.exe sein.</span><span class="sxs-lookup"><span data-stu-id="f8481-157">This must be the location of migrate.exe</span></span>                                                                                                                                                                                      |
| <span data-ttu-id="f8481-158">Nicht behandelte Ausnahme: System.NullReferenceException: der Objektverweis ist nicht auf eine Instanz eines Objekts festgelegt.</span><span class="sxs-lookup"><span data-stu-id="f8481-158">Unhandled Exception: System.NullReferenceException: Object reference not set to an instance of an object.</span></span> <br/>   <span data-ttu-id="f8481-159">am System.Data.Entity.Migrations.Console.Program.Main (String [] Args)</span><span class="sxs-lookup"><span data-stu-id="f8481-159">at System.Data.Entity.Migrations.Console.Program.Main(String[] args)</span></span>                                                                                                                                             | <span data-ttu-id="f8481-160">Dies kann verursacht werden, indem ein erforderlicher Parameter für ein Szenario, das Sie verwenden nicht angeben.</span><span class="sxs-lookup"><span data-stu-id="f8481-160">This can be caused by not specifying a required parameter for a scenario that you are using.</span></span> <span data-ttu-id="f8481-161">Z. B. Angeben einer Verbindungszeichenfolge ohne Angabe der Name des Anbieters ein.</span><span class="sxs-lookup"><span data-stu-id="f8481-161">For example specifying a connection string without specifying the provider name.</span></span>                                                                                                                        |
| <span data-ttu-id="f8481-162">Fehler: mehrere Typen von Migrationen-Konfiguration wurde in der Assembly 'ClassLibrary1' gefunden.</span><span class="sxs-lookup"><span data-stu-id="f8481-162">ERROR: More than one migrations configuration type was found in the assembly 'ClassLibrary1'.</span></span> <span data-ttu-id="f8481-163">Geben Sie den Namen eines verwenden.</span><span class="sxs-lookup"><span data-stu-id="f8481-163">Specify the name of the one to use.</span></span>                                                                                                                                                                                                  | <span data-ttu-id="f8481-164">Wie in der Fehlermeldung angegeben, ist es mehr als eine Konfigurationsklasse in der angegebenen Assembly an.</span><span class="sxs-lookup"><span data-stu-id="f8481-164">As the error states, there is more than one configuration class in the given assembly.</span></span> <span data-ttu-id="f8481-165">Sie müssen die /configurationType-Schalter verwenden, um anzugeben, welche verwenden.</span><span class="sxs-lookup"><span data-stu-id="f8481-165">You must use the /configurationType switch to specify which to use.</span></span>                                                                                                                                           |
| <span data-ttu-id="f8481-166">Fehler: Konnte nicht geladen werden, Datei oder Assembly '&lt;AssemblyName&gt;' oder eine ihrer Abhängigkeiten.</span><span class="sxs-lookup"><span data-stu-id="f8481-166">ERROR: Could not load file or assembly ‘&lt;assemblyName&gt;’ or one of its dependencies.</span></span> <span data-ttu-id="f8481-167">Die angegebene Assembly oder die Codebasis ist ungültig.</span><span class="sxs-lookup"><span data-stu-id="f8481-167">The given assembly name or codebase was invalid.</span></span> <span data-ttu-id="f8481-168">(Ausnahme von HRESULT: 0x80131047)</span><span class="sxs-lookup"><span data-stu-id="f8481-168">(Exception from HRESULT: 0x80131047)</span></span>                                                                                                                                                    | <span data-ttu-id="f8481-169">Dies kann verursacht werden, durch Angeben von Namen einer Assembly falsch oder ohne</span><span class="sxs-lookup"><span data-stu-id="f8481-169">This can be caused by specifying an assembly name incorrectly or not having</span></span>                                                                                                                                                                                                                          |
| <span data-ttu-id="f8481-170">Fehler: Konnte nicht geladen werden, Datei oder Assembly '&lt;AssemblyName&gt;' oder eine ihrer Abhängigkeiten.</span><span class="sxs-lookup"><span data-stu-id="f8481-170">ERROR: Could not load file or assembly ‘&lt;assemblyName&gt;' or one of its dependencies.</span></span> <span data-ttu-id="f8481-171">Es wurde versucht, ein Programm mit einem falschen Format zu laden.</span><span class="sxs-lookup"><span data-stu-id="f8481-171">An attempt was made to load a program with an incorrect format.</span></span>                                                                                                                                                                          | <span data-ttu-id="f8481-172">Dies geschieht, wenn Sie versuchen, x X64 migrate.exe ausgeführt Anwendung.</span><span class="sxs-lookup"><span data-stu-id="f8481-172">This happens if you are trying to run migrate.exe against an x64 application.</span></span> <span data-ttu-id="f8481-173">EF 5.0 und unten funktioniert nur auf X86.</span><span class="sxs-lookup"><span data-stu-id="f8481-173">EF 5.0 and below will only work on x86.</span></span>                                                                                                                                                                                |
