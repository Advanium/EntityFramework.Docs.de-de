---
title: Upgrade auf Entity Framework 6 EF6
author: divega
ms.date: 10/23/2016
ms.assetid: 29958ae5-85d3-4585-9ba6-550b8ec9393a
ms.openlocfilehash: 4395a9c117a6cf38e7fc08f11ee689d6fffa6fed
ms.sourcegitcommit: 708b18520321c587b2046ad2ea9fa7c48aeebfe5
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 10/09/2019
ms.locfileid: "72182096"
---
# <a name="upgrading-to-entity-framework-6"></a><span data-ttu-id="cec52-102">Upgrade auf Entity Framework 6</span><span class="sxs-lookup"><span data-stu-id="cec52-102">Upgrading to Entity Framework 6</span></span>

<span data-ttu-id="cec52-103">In früheren Versionen von EF wurde der Code zwischen den Kernbibliotheken (primär "System. Data. Entity. dll") aufgeteilt, die als Teil des .NET Framework und Out-of-Band-Bibliotheken (OOB) ausgeliefert wurden (primär "EntityFramework. dll"), die in einem nuget-Paket enthalten sind.</span><span class="sxs-lookup"><span data-stu-id="cec52-103">In previous versions of EF the code was split between core libraries (primarily System.Data.Entity.dll) shipped as part of the .NET Framework and out-of-band (OOB) libraries (primarily EntityFramework.dll) shipped in a NuGet package.</span></span> <span data-ttu-id="cec52-104">EF6 übernimmt den Code aus den Kernbibliotheken und bindet ihn in die OOB-Bibliotheken ein.</span><span class="sxs-lookup"><span data-stu-id="cec52-104">EF6 takes the code from the core libraries and incorporates it into the OOB libraries.</span></span> <span data-ttu-id="cec52-105">Dies war notwendig, damit EF als Open Source-fähig gemacht werden kann, damit es in der Lage ist, sich von .NET Framework in einem anderen Tempo zu entwickeln.</span><span class="sxs-lookup"><span data-stu-id="cec52-105">This was necessary in order to allow EF to be made open source and for it to be able to evolve at a different pace from .NET Framework.</span></span> <span data-ttu-id="cec52-106">Dies hat zur Folge, dass Anwendungen für die verschoten Typen neu erstellt werden müssen.</span><span class="sxs-lookup"><span data-stu-id="cec52-106">The consequence of this is that applications will need to be rebuilt against the moved types.</span></span>

<span data-ttu-id="cec52-107">Dies sollte für Anwendungen, die dbcontext verwenden, als in EF 4,1 und höher ausgeliefert werden, einfach sein.</span><span class="sxs-lookup"><span data-stu-id="cec52-107">This should be straightforward for applications that make use of DbContext as shipped in EF 4.1 and later.</span></span> <span data-ttu-id="cec52-108">Ein wenig mehr Arbeit ist für Anwendungen erforderlich, die ObjectContext verwenden, aber es ist immer noch nicht schwierig.</span><span class="sxs-lookup"><span data-stu-id="cec52-108">A little more work is required for applications that make use of ObjectContext but it still isn’t hard to do.</span></span>

<span data-ttu-id="cec52-109">Hier finden Sie eine Prüfliste der Dinge, die Sie zum Aktualisieren einer vorhandenen Anwendung auf EF6 benötigen.</span><span class="sxs-lookup"><span data-stu-id="cec52-109">Here is a checklist of the things you need to do to upgrade an existing application to EF6.</span></span>

## <a name="1-install-the-ef6-nuget-package"></a><span data-ttu-id="cec52-110">1. Installieren Sie das nuget-Paket EF6.</span><span class="sxs-lookup"><span data-stu-id="cec52-110">1. Install the EF6 NuGet package</span></span>

<span data-ttu-id="cec52-111">Sie müssen ein Upgrade auf die neue Laufzeit von Entity Framework 6 durchführen.</span><span class="sxs-lookup"><span data-stu-id="cec52-111">You need to upgrade to the new Entity Framework 6 runtime.</span></span>

1. <span data-ttu-id="cec52-112">Klicken Sie mit der rechten Maustaste auf das Projekt, und wählen Sie **nuget-Pakete verwalten aus.**</span><span class="sxs-lookup"><span data-stu-id="cec52-112">Right-click on your project and select **Manage NuGet Packages...**</span></span>  
2. <span data-ttu-id="cec52-113">Wählen **Sie auf der** Registerkarte " **Online** " **EntityFramework** aus, und klicken</span><span class="sxs-lookup"><span data-stu-id="cec52-113">Under the **Online** tab select **EntityFramework** and click **Install**</span></span>  
   > [!NOTE]
   > <span data-ttu-id="cec52-114">Wenn eine frühere Version des nuget-Pakets von EntityFramework installiert wurde, wird Sie auf EF6 aktualisiert.</span><span class="sxs-lookup"><span data-stu-id="cec52-114">If a previous version of the EntityFramework NuGet package was installed this will upgrade it to EF6.</span></span>

<span data-ttu-id="cec52-115">Alternativ können Sie den folgenden Befehl über die Paket-Manager-Konsole ausführen:</span><span class="sxs-lookup"><span data-stu-id="cec52-115">Alternatively, you can run the following command from Package Manager Console:</span></span>

``` powershell
Install-Package EntityFramework
```

## <a name="2-ensure-that-assembly-references-to-systemdataentitydll-are-removed"></a><span data-ttu-id="cec52-116">2. Stellen Sie sicher, dass Assemblyverweise auf System. Data. Entity. dll entfernt werden.</span><span class="sxs-lookup"><span data-stu-id="cec52-116">2. Ensure that assembly references to System.Data.Entity.dll are removed</span></span>

<span data-ttu-id="cec52-117">Wenn Sie das nuget-Paket "EF6" installieren, werden automatisch alle Verweise auf "System. Data. Entity" aus dem Projekt entfernt.</span><span class="sxs-lookup"><span data-stu-id="cec52-117">Installing the EF6 NuGet package should automatically remove any references to System.Data.Entity from your project for you.</span></span>

## <a name="3-swap-any-ef-designer-edmx-models-to-use-ef-6x-code-generation"></a><span data-ttu-id="cec52-118">3. Austauschen von EF Designer-Modellen (edmx) zur Verwendung der EF 6. x-Codegenerierung</span><span class="sxs-lookup"><span data-stu-id="cec52-118">3. Swap any EF Designer (EDMX) models to use EF 6.x code generation</span></span>

<span data-ttu-id="cec52-119">Wenn Sie Modelle mit dem EF-Designer erstellt haben, müssen Sie die Code Generierungs Vorlagen aktualisieren, um EF6 kompatiblen Code zu generieren.</span><span class="sxs-lookup"><span data-stu-id="cec52-119">If you have any models created with the EF Designer, you will need to update the code generation templates to generate EF6 compatible code.</span></span>

> [!NOTE]
> <span data-ttu-id="cec52-120">Zurzeit sind nur EF 6. x dbcontext Generator-Vorlagen für Visual Studio 2012 und 2013 verfügbar.</span><span class="sxs-lookup"><span data-stu-id="cec52-120">There are currently only EF 6.x DbContext Generator templates available for Visual Studio 2012 and 2013.</span></span>

1. <span data-ttu-id="cec52-121">Löschen vorhandener Code Generierungs Vorlagen.</span><span class="sxs-lookup"><span data-stu-id="cec52-121">Delete existing code-generation templates.</span></span> <span data-ttu-id="cec52-122">Diese Dateien werden in der Regel **\<edmx_file_name\>. tt** benannt und **\<edmx_file_name\>. Context.tt** und werden unter der EDMX-Datei in Projektmappen-Explorer.</span><span class="sxs-lookup"><span data-stu-id="cec52-122">These files will typically be named **\<edmx_file_name\>.tt** and **\<edmx_file_name\>.Context.tt** and be nested under your edmx file in Solution Explorer.</span></span> <span data-ttu-id="cec52-123">Sie können die Vorlagen in Projektmappen-Explorer auswählen und die ENTF **-Taste drücken** , um Sie zu löschen.</span><span class="sxs-lookup"><span data-stu-id="cec52-123">You can select the templates in Solution Explorer and press the **Del** key to delete them.</span></span>  
   > [!NOTE]
   > <span data-ttu-id="cec52-124">In Website Projekten werden die Vorlagen nicht in der EDMX-Datei, sondern in Projektmappen-Explorer aufgeführt.</span><span class="sxs-lookup"><span data-stu-id="cec52-124">In Web Site projects the templates will not be nested under your edmx file, but listed alongside it in Solution Explorer.</span></span>  

   > [!NOTE]
   > <span data-ttu-id="cec52-125">In VB.NET-Projekten müssen Sie "alle Dateien anzeigen" aktivieren, damit die Dateien der Dateien in der Liste angezeigt werden können.</span><span class="sxs-lookup"><span data-stu-id="cec52-125">In VB.NET projects you will need to enable 'Show All Files' to be able to see the nested template files.</span></span>
2. <span data-ttu-id="cec52-126">Fügen Sie die entsprechende EF 6. x-Code Generierungs Vorlage hinzu.</span><span class="sxs-lookup"><span data-stu-id="cec52-126">Add the appropriate EF 6.x code generation template.</span></span> <span data-ttu-id="cec52-127">Öffnen Sie das Modell im EF-Designer, klicken Sie mit der rechten Maustaste auf die Entwurfs Oberfläche, und wählen Sie **Code Generierungs Element hinzufügen aus.**</span><span class="sxs-lookup"><span data-stu-id="cec52-127">Open your model in the EF Designer, right-click on the design surface and select **Add Code Generation Item...**</span></span>
    - <span data-ttu-id="cec52-128">Wenn Sie die dbcontext-API verwenden (empfohlen), ist der **dbcontext-Generator von EF 6. x** auf der Registerkarte " **Daten** " verfügbar.</span><span class="sxs-lookup"><span data-stu-id="cec52-128">If you are using the DbContext API (recommended) then **EF 6.x DbContext Generator** will be available under the **Data** tab.</span></span>  
      > [!NOTE]
      > <span data-ttu-id="cec52-129">Wenn Sie Visual Studio 2012 verwenden, müssen Sie die EF 6-Tools installieren, um diese Vorlage zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="cec52-129">If you are using Visual Studio 2012, you will need to install the EF 6 Tools to have this template.</span></span> <span data-ttu-id="cec52-130">Weitere Informationen finden [Sie unter Get Entity Framework](~/ef6/fundamentals/install.md) .</span><span class="sxs-lookup"><span data-stu-id="cec52-130">See [Get Entity Framework](~/ef6/fundamentals/install.md) for details.</span></span>  

    - <span data-ttu-id="cec52-131">Wenn Sie die ObjectContext-API verwenden, müssen Sie die Registerkarte **Online** auswählen und nach **EF 6. x EntityObject Generator**suchen.</span><span class="sxs-lookup"><span data-stu-id="cec52-131">If you are using the ObjectContext API then you will need to select the **Online** tab and search for **EF 6.x EntityObject Generator**.</span></span>  
3. <span data-ttu-id="cec52-132">Wenn Sie Anpassungen auf die Code Generierungs Vorlagen angewendet haben, müssen Sie Sie erneut auf die aktualisierten Vorlagen anwenden.</span><span class="sxs-lookup"><span data-stu-id="cec52-132">If you applied any customizations to the code generation templates you will need to re-apply them to the updated templates.</span></span>

## <a name="4-update-namespaces-for-any-core-ef-types-being-used"></a><span data-ttu-id="cec52-133">4. Aktualisieren von Namespaces für alle verwendeten Core EF-Typen</span><span class="sxs-lookup"><span data-stu-id="cec52-133">4. Update namespaces for any core EF types being used</span></span>

<span data-ttu-id="cec52-134">Die Namespaces für dbcontext und Code First Typen wurden nicht geändert.</span><span class="sxs-lookup"><span data-stu-id="cec52-134">The namespaces for DbContext and Code First types have not changed.</span></span> <span data-ttu-id="cec52-135">Dies bedeutet, dass für viele Anwendungen, die EF 4,1 oder höher verwenden, nichts geändert werden muss.</span><span class="sxs-lookup"><span data-stu-id="cec52-135">This means for many applications that use EF 4.1 or later you will not need to change anything.</span></span>

<span data-ttu-id="cec52-136">Typen wie "ObjectContext", die zuvor in "System. Data. Entity. dll" enthalten waren, wurden in neue Namespaces verschoben.</span><span class="sxs-lookup"><span data-stu-id="cec52-136">Types like ObjectContext that were previously in System.Data.Entity.dll have been moved to new namespaces.</span></span> <span data-ttu-id="cec52-137">Dies bedeutet, dass Sie ggf. Ihre *using* -oder *Import* -Direktiven aktualisieren müssen, um für EF6 zu erstellen</span><span class="sxs-lookup"><span data-stu-id="cec52-137">This means you may need to update your *using* or *Import* directives to build against EF6.</span></span>

<span data-ttu-id="cec52-138">Die allgemeine Regel für Änderungen am Namespace besteht darin, dass alle Typen in System. Data. \* in System. Data. Entity. Core. \* verschoben werden.</span><span class="sxs-lookup"><span data-stu-id="cec52-138">The general rule for namespace changes is that any type in System.Data.\* is moved to System.Data.Entity.Core.\*.</span></span> <span data-ttu-id="cec52-139">Mit anderen Worten: Fügen Sie einfach **Entity. Core ein.**</span><span class="sxs-lookup"><span data-stu-id="cec52-139">In other words, just insert **Entity.Core.**</span></span> <span data-ttu-id="cec52-140">nach "System. Data".</span><span class="sxs-lookup"><span data-stu-id="cec52-140">after System.Data.</span></span> <span data-ttu-id="cec52-141">Beispiel:</span><span class="sxs-lookup"><span data-stu-id="cec52-141">For example:</span></span>

- <span data-ttu-id="cec52-142">System. Data. EntityException = > System. Data. **Entity. Core**. EntityException</span><span class="sxs-lookup"><span data-stu-id="cec52-142">System.Data.EntityException => System.Data.**Entity.Core**.EntityException</span></span>  
- <span data-ttu-id="cec52-143">System. Data. Objects. ObjectContext = > System. Data. **Entity. Core**. Objects. ObjectContext</span><span class="sxs-lookup"><span data-stu-id="cec52-143">System.Data.Objects.ObjectContext => System.Data.**Entity.Core**.Objects.ObjectContext</span></span>  
- <span data-ttu-id="cec52-144">System. Data. Objects. DataClasses. RelationshipManager = > System. Data. **Entity. Core**. Objects. DataClasses. RelationshipManager</span><span class="sxs-lookup"><span data-stu-id="cec52-144">System.Data.Objects.DataClasses.RelationshipManager => System.Data.**Entity.Core**.Objects.DataClasses.RelationshipManager</span></span>  

<span data-ttu-id="cec52-145">Diese Typen befinden sich in den Kernnamespaces, da Sie für die meisten dbcontext-basierten Anwendungen nicht direkt verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="cec52-145">These types are in the *Core* namespaces because they are not used directly for most DbContext-based applications.</span></span> <span data-ttu-id="cec52-146">Einige Typen, die Teil von System. Data. Entity. dll waren, werden weiterhin häufig und direkt für dbcontext-basierte Anwendungen verwendet und daher nicht in die *Kernnamespaces* verschoben.</span><span class="sxs-lookup"><span data-stu-id="cec52-146">Some types that were part of System.Data.Entity.dll are still used commonly and directly for DbContext-based applications and so have not been moved into the *Core* namespaces.</span></span> <span data-ttu-id="cec52-147">Diese Herangehensweisen lauten:</span><span class="sxs-lookup"><span data-stu-id="cec52-147">These are:</span></span>

- <span data-ttu-id="cec52-148">System. Data. EntityState = > System. Data. **Entität**. EntityState</span><span class="sxs-lookup"><span data-stu-id="cec52-148">System.Data.EntityState => System.Data.**Entity**.EntityState</span></span>  
- <span data-ttu-id="cec52-149">System. Data. Objects. DataClasses. EdmFunctionAttribute = > System. Data. **Entity. dbfunctionattribute**</span><span class="sxs-lookup"><span data-stu-id="cec52-149">System.Data.Objects.DataClasses.EdmFunctionAttribute => System.Data.**Entity.DbFunctionAttribute**</span></span>  
  > [!NOTE]
  > <span data-ttu-id="cec52-150">Diese Klasse wurde umbenannt. eine Klasse mit dem alten Namen ist noch vorhanden und funktioniert, ist aber jetzt als veraltet markiert.</span><span class="sxs-lookup"><span data-stu-id="cec52-150">This class has been renamed; a class with the old name still exists and works, but it now marked as obsolete.</span></span>  
- <span data-ttu-id="cec52-151">System. Data. Objects. EntityFunctions = > System. Data. **Entity. dbfunctions**</span><span class="sxs-lookup"><span data-stu-id="cec52-151">System.Data.Objects.EntityFunctions => System.Data.**Entity.DbFunctions**</span></span>  
  > [!NOTE]
  > <span data-ttu-id="cec52-152">Diese Klasse wurde umbenannt. eine Klasse mit dem alten Namen ist noch vorhanden und funktioniert, ist aber jetzt als veraltet markiert.)</span><span class="sxs-lookup"><span data-stu-id="cec52-152">This class has been renamed; a class with the old name still exists and works, but it now marked as obsolete.)</span></span>  
- <span data-ttu-id="cec52-153">Räumliche Klassen (z. b. dbgeography, dbgeometry) wurden aus System. Data. Spatial = > System. Data verschoben. **Entität**. Räumliche</span><span class="sxs-lookup"><span data-stu-id="cec52-153">Spatial classes (for example, DbGeography, DbGeometry) have moved from System.Data.Spatial => System.Data.**Entity**.Spatial</span></span>

> [!NOTE]
> <span data-ttu-id="cec52-154">Einige Typen im System. Data-Namespace befinden sich in "System. Data. dll", bei dem es sich nicht um eine EF-Assembly handelt.</span><span class="sxs-lookup"><span data-stu-id="cec52-154">Some types in the System.Data namespace are in System.Data.dll which is not an EF assembly.</span></span> <span data-ttu-id="cec52-155">Diese Typen wurden nicht verschoben, sodass Ihre Namespaces unverändert bleiben.</span><span class="sxs-lookup"><span data-stu-id="cec52-155">These types have not moved and so their namespaces remain unchanged.</span></span>
